(function(a){a.fn.hachiko=function(b){var d=a.extend({},a.fn.hachiko.options,b);return this.each(function(){d.element=a(this);a.hachiko._updateOriginalToMatchClone(d);if(!c(d)){a.hachiko._init(d)}else{a.hachiko._destroy(d)}});function c(e){var g="";for(var f=0;f<=a.hachiko.DESTROY_COMMAND.length;f++){if(!e.hasOwnProperty(f)){break}g+=e[f]}return g==a.hachiko.DESTROY_COMMAND}};a.fn.hachiko.options={top:null,bottom:null,left:null,right:null,element:"",parent:null,}})(jQuery);jQuery.extend({hachiko:{NAMESPACE:"hachiko",ATTRIBUTE_CLONE_CLASS:"data-hachiko-clone",ORIGINAL_ELEMENT_CLASS:"hachiko_original_element",DESTROY_COMMAND:"destroy",_init:function(b){var d=b&&b.element?b.element:undefined;if(d){this._destroy(b);$(d).data(this.NAMESPACE,b).addClass(this.ORIGINAL_ELEMENT_CLASS);var a=this;var c="scroll."+this.NAMESPACE;$(window).on(c,function(e){a._onWindowScroll(e)}).trigger(c)}},_createClone:function(b){var c=b&&b.element?b.element:undefined;var d=$(c).attr(this.ATTRIBUTE_CLONE_CLASS);if(c&&!d){var a=this.NAMESPACE+"_"+Math.round(Math.random()*10000000);var e=$(c).clone(true,true);$(e).removeClass(this.ORIGINAL_ELEMENT_CLASS).addClass(a).css("position","fixed");if(b.top==null&&b.bottom==null){b.top=0}if(b.left==null&&b.right==null){b.left=0}if(!b.parent){b.parent=$("body")}if(b.top!=null){$(e).css("top",b.top)}if(b.bottom!=null){$(e).css("bottom",b.bottom)}if(b.left!=null){$(e).css("left",b.left)}if(b.right!=null){$(e).css("right",b.right)}$(b.parent).append(e);$(c).attr(this.ATTRIBUTE_CLONE_CLASS,a)}},_removeClone:function(b){var c=b&&b.element?b.element:undefined;if(c){var a=$(c).attr(this.ATTRIBUTE_CLONE_CLASS);$("."+a).remove();$(c).removeAttr(this.ATTRIBUTE_CLONE_CLASS)}},_updateOriginalToMatchClone:function(b){var c=b&&b.element?b.element:undefined;if(c){var a=$(c).attr(this.ATTRIBUTE_CLONE_CLASS);var e=$("."+a);if(e.size()>0){var d=$(e).clone(true,true);$(d).attr(this.ATTRIBUTE_CLONE_CLASS,a).removeClass(a).addClass(this.ORIGINAL_ELEMENT_CLASS);$(d).css({position:"",top:"",bottom:"",left:"",right:""});$(c).after(d).remove();b.element=$(d)}}},_onWindowScroll:function(b){var a=this;var c=$("."+this.ORIGINAL_ELEMENT_CLASS);$(c).each(function(){var e=$(this).data(a.NAMESPACE);var g=$(this).offset().top;var d=$(window).scrollTop();var f=e.top!=null?e.top:0;if(d>=(g-f)){a._createClone(e);$(this).css("visibility","hidden")}else{a._updateOriginalToMatchClone(e);a._removeClone(e)}})},_destroy:function(a){var b=a&&a.element?a.element:undefined;if(b){this._removeClone(a);$(b).css("visibility","").removeClass(this.ORIGINAL_ELEMENT_CLASS).data(this.NAMESPACE,null)}},setDefaults:function(a){var b=$.extend({},$.fn.hachiko.options,a);$.fn.hachiko.options=b}}});